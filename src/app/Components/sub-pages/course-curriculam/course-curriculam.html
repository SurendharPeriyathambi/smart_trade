<div class="div-box"></div>
<div class="curriculum-container">
  <div class="details-container">
    <div class="top-info-bar mb-3">
      <div class="left-section">
        <img src="https://i.pravatar.cc/40" alt="profile" class="avatar">
        <span class="name">James Patel</span>
      </div>
      <div class="divider"></div>

      <div class="right-section">
        <div class="info-item">
          <span class="icon"><i class="bi bi-calendar4"></i></span>
          <span>Last Updated Dec 25, 2025</span>
        </div>

        <div class="divider"></div>

        <div class="info-item">
          <span class="icon"><i class="bi bi-globe"></i></span>
          <span>English</span>
        </div>
      </div>
    </div>
  </div>

  <div class="section" *ngFor="let section of sections">
    <!-- Section Header -->
    <div class="section-header" (click)="toggle(section)">
      <div class="left">
        <span class="arrow" [class.open]="section.expanded"><i class="bi bi-chevron-down"></i></span>
        <span class="section-title">{{ section.title }}</span>
      </div>

      <div class="right">
        <span>Lessons: {{ section.lessonsCount }}</span>
        <span>Duration: {{ section.duration }}</span>
      </div>
    </div>

    <!-- Lessons -->
    <div class="lesson-list" [class.open]="section.expanded">
      <div class="lesson" (click)="$event.stopPropagation()" *ngFor="let lesson of section.lessons">
        <div class="lesson-left">
          <span class="doc-icon"><img src="assets/images/file.png" width="20" alt=""></span>
          <span class="lesson-title">{{ lesson.title }}</span>
        </div>

        <div class="lesson-right">
          <button *ngIf="lesson.preview" class="preview-btn" (click)="openPreview(); $event.stopPropagation()">Preview</button>
          <span *ngIf="lesson.locked" class="lock-icon"><img src="assets/images/lock.png" width="22" alt=""></span>
          <span class="time">{{ lesson.duration }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Preview Modal -->
<ng-container *ngIf="previewOpen">
  <div class="preview-backdrop" (click)="closePreview()">
    <div class="preview-modal right-popup" (click)="$event.stopPropagation()">
      <!-- Card -->
      <div class="preview-card">
        <div class="video-thumb" (click)="openVideoPlayer()">
          <span class="play-btn">â–¶</span>
        </div>

        <h3 class="card-title">Course Essentials</h3>

        <div class="info">
          <div class="rows">
            <span><i class="bi bi-person"></i> Instructor</span>
            <span>James Patel</span>
          </div>
          <div class="rows">
            <span><i class="bi bi-clock"></i> Duration</span>
            <span>6.5 hours</span>
          </div>
          <div class="rows">
            <span><i class="bi bi-file-earmark-text"></i> Lessons</span>
            <span>42</span>
          </div>
        </div>

        <button class="buy-btn">Buy Now <i class="bi bi-archive ms-2"></i></button>
      </div>
    </div>
  </div>
</ng-container>

<!-- Video Player Modal -->
<ng-container *ngIf="videoPlayerOpen">
  <div class="video-player-backdrop" (click)="closeVideoPlayer()">
    <div class="video-player-modal" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeVideoPlayer()">
        <i class="bi bi-x-lg"></i>
      </button>
      
      <div class="video-container">
        <video #videoPlayer controls autoplay>
          <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      </div>

      <div class="video-info">
        <h3 class="video-title">Course Essentials - Introduction</h3>
        <p class="video-description">Learn the fundamentals of trading and options in this comprehensive course.</p>
      </div>
    </div>
  </div>
</ng-container>